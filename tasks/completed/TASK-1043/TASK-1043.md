---
id: TASK-1043
title: Add similar task ID suggestions to dependency validation errors
status: completed
task_type: implementation
created: 2026-01-25T12:00:00Z
updated: 2026-01-25T14:50:00Z
completed: 2026-01-25T14:50:00Z
priority: low
tags: [feature-loader, ux, validation, error-messages]
complexity: 3
parent_review: TASK-REV-C809
estimated_minutes: 60
actual_minutes: 50
previous_state: in_review
state_transition_reason: "Task completed - all acceptance criteria met"
completed_location: tasks/completed/TASK-1043/
organized_files:
  - TASK-1043.md
test_results:
  status: passed
  coverage: 97
  last_run: 2026-01-25T14:45:00Z
  tests_total: 90
  tests_passed: 90
  tests_failed: 0
  tests_added: 19
---

# Task: Add similar task ID suggestions to dependency validation errors

## Description

Enhance the feature validation error messages to suggest similar task IDs when an unknown dependency is detected. This improves UX by helping users quickly identify typos in their feature configuration.

## Origin

Created from [I]mplement decision on TASK-REV-C809 (feature-build logging failure analysis).

## Current Behavior

When a task references a non-existent dependency, the error message was:

```
Task TASK-LOG-003 has unknown dependency: TASK-DOC-001
```

## New Behavior (Implemented)

The error message now suggests similar task IDs:

```
Task TASK-LOG-003 has unknown dependency: TASK-DOC-001. Did you mean: TASK-LOG-001?
```

## Implementation Details

**File modified**: `guardkit/orchestrator/feature_loader.py`

### Changes Made

1. **Added `_find_similar_ids()` helper function** (lines 68-119)
   - Uses prefix matching (e.g., `TASK-AUTH-001` matches `TASK-AUTH-002`)
   - Uses character difference counting (max 2 differences by default)
   - Uses substring matching for typos
   - Returns up to 3 similar IDs sorted by similarity
   - Case-insensitive matching

2. **Updated `validate_feature()` method** (lines 668-677)
   - Integrates `_find_similar_ids()` when unknown dependency found
   - Appends "Did you mean: X?" suggestion when similar IDs exist
   - No change to message when no similar IDs found

### Example Output

**With suggestions:**
```
Task TASK-AUTH-002 has unknown dependency: TASK-AUTH-003. Did you mean: TASK-AUTH-001?
```

**Without suggestions (no similar IDs):**
```
Task TASK-AUTH-002 has unknown dependency: COMPLETELY-DIFFERENT
```

## Acceptance Criteria

- [x] Helper function `_find_similar_ids()` implemented
- [x] Validation errors include suggestions when similar IDs exist
- [x] Unit tests added for the new functionality
- [x] No suggestions shown when no similar IDs exist

## Test Cases

1. ✅ `TASK-DOC-001` with candidates `[TASK-LOG-001, TASK-LOG-002]` → suggests `TASK-LOG-001`
2. ✅ `TASK-AUTH-001` with candidates `[TASK-AUTH-002, TASK-AUTH-003]` → suggests both
3. ✅ `TASK-XYZ-999` with candidates `[TASK-ABC-001]` → no suggestion
4. ✅ Typo `TASK-LOG-01` with candidates `[TASK-LOG-001]` → suggests `TASK-LOG-001`

## Tests Added

19 new unit tests in `tests/unit/test_feature_loader.py`:
- `TestFindSimilarIds` class covering all matching strategies
- Integration test verifying end-to-end error message formatting
- Edge cases for empty candidates, case sensitivity, max results

## Completion Summary

| Metric | Value |
|--------|-------|
| Status | ✅ Completed |
| Tests Added | 19 |
| Tests Total | 90 (all passing) |
| Coverage | 97% |
| Estimated Time | 60 min |
| Actual Time | ~50 min |
| Files Modified | 2 |

## Notes

- Priority was low as validation was working correctly
- This is a UX enhancement, not a bug fix
- Implementation kept simple - no external fuzzy matching libraries needed
