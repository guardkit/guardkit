# TASK-DOC-B8F2: Clarify Template Agent Enhancement Workflow Documentation

**Created**: 2025-11-23
**Priority**: MEDIUM
**Estimated Effort**: 1-2 hours
**Complexity**: 3/10 (SIMPLE - documentation update)
**Task Type**: documentation
**Tags**: documentation, templates, agent-enhancement, agent-format, user-guidance

---

## Problem Statement

### Current Documentation Gap

The relationship between `/template-create`, `/agent-enhance`, and `/agent-format` is not clearly explained in user-facing documentation. Users may be confused about:

1. **When to use `/agent-format` vs `/agent-enhance`**
2. **Why templates ship with generic boundaries (6/10) instead of AI-enhanced boundaries (9/10)**
3. **The two-tier quality system** (template-level vs project-level)
4. **Progressive enhancement workflow** for template users

### User Confusion Scenarios

**Scenario 1: Template Author**
```bash
User: "I'm creating a new template. Should I use /agent-enhance on all agents?"
Current docs: No clear guidance
Expected answer: No, use /agent-format for speed and reusability
```

**Scenario 2: Template User**
```bash
User: "Why do my template agents have generic boundaries instead of specific ones?"
Current docs: Not explained
Expected answer: Templates ship with 6/10 (generic), you can upgrade to 9/10 with /agent-enhance
```

**Scenario 3: Decision Making**
```bash
User: "I have 50 agents. Which command should I use?"
Current docs: Not clear
Expected answer: Depends on use case (see decision matrix)
```

---

## Solution: Add Template Agent Enhancement Workflow Documentation

### Documentation Updates Needed

#### 1. Update `docs/guides/template-philosophy.md`

Add new section: **"Agent Enhancement Strategy"**

```markdown
## Agent Enhancement Strategy

### Why Templates Ship with Generic Boundaries

Templates include **generic boundaries (6/10 quality)** generated by `/agent-format`:

**Reasons**:
1. **Speed**: All template agents enhanced in <1 minute (vs 45+ minutes with AI)
2. **No AI Dependencies**: No Claude API calls during template creation
3. **Zero Cost**: Template authors don't pay for AI generation
4. **Maximum Reusability**: Generic boundaries work for ANY project using the stack
5. **Progressive Enhancement**: Users can upgrade to 9/10 when they need it

### Two-Tier Quality System

| Tier | Quality | Generated By | When | Who Benefits |
|------|---------|--------------|------|--------------|
| **Template (Tier 1)** | 6/10 | `/agent-format` | Template creation | All users (included) |
| **Project (Tier 2)** | 9/10 | `/agent-enhance` | After project init | Individual users (optional) |

### Template User Workflow

**Day 1: Initialize with template**
```bash
taskwright init react-typescript
# All agents have generic boundaries (6/10)
# Immediate value: Better than 0/10, follows GitHub standards
```

**Optional: Upgrade to domain-specific**
```bash
# Enhance critical agents for your specific codebase
/agent-enhance .claude/agents/api-specialist.md
/agent-enhance .claude/agents/testing-specialist.md
# Now 9/10 with boundaries tailored to YOUR project
```

### Benefits of This Approach

1. **Template authors**: Fast creation, no API costs
2. **Template users**: Immediate 6/10 quality, optional upgrade to 9/10
3. **Cost distribution**: Users only pay for AI if they choose to upgrade
4. **Quality consistency**: All templates meet 6/10 baseline
```

#### 2. Create New Doc: `docs/guides/agent-enhancement-decision-guide.md`

```markdown
# Agent Enhancement Decision Guide

## When to Use `/agent-format` vs `/agent-enhance`

### Use `/agent-format` (Generic Boundaries - 6/10)

**Best for:**
- ✅ Template agent libraries (5-20 agents per template)
- ✅ Large-scale agent libraries (50+ agents)
- ✅ CI/CD auto-formatting pipelines
- ✅ Air-gapped/offline environments
- ✅ Cost-sensitive scenarios
- ✅ Quick compliance boost (0/10 → 6/10 in seconds)

**Characteristics:**
- **Speed**: Processes 15 agents in <1 minute
- **Cost**: $0 (no AI calls)
- **Quality**: 6/10 (90% GitHub compliance)
- **Dependencies**: None (deterministic, offline)

**Example Use Cases:**
```bash
# Template creation (PRIMARY USE CASE)
/template-create react-typescript
# Auto-runs /agent-format on all template agents

# Batch format large library
for agent in agents/*.md; do
    /agent-format "$agent"
done

# CI/CD integration
/agent-format --validate-only agents/*.md
```

### Use `/agent-enhance` (AI-Enhanced Boundaries - 9/10)

**Best for:**
- ✅ Critical workflow agents (task-manager, architectural-reviewer, etc.)
- ✅ Project-specific customization after template initialization
- ✅ Small agent sets (1-20 agents)
- ✅ Domain-specific boundary requirements
- ✅ Maximum quality requirements

**Characteristics:**
- **Speed**: ~3 minutes per agent
- **Cost**: Claude API tokens
- **Quality**: 9/10 (100% GitHub compliance + domain-specific)
- **Dependencies**: Claude API, MCP (optional)

**Example Use Cases:**
```bash
# Global agents (15 agents)
for agent in installer/core/agents/*.md; do
    /agent-enhance "$agent"
done
# Total: ~45 minutes

# Selective enhancement after template init
taskwright init react-typescript
/agent-enhance .claude/agents/api-specialist.md
/agent-enhance .claude/agents/domain-specialist.md
# Enhanced boundaries customized to YOUR codebase
```

### Decision Matrix

| Scenario | Agent Count | Recommended | Reasoning |
|----------|-------------|-------------|-----------|
| Template creation | 5-20 | `/agent-format` | Speed, reusability, no AI cost |
| Global agents (Taskwright) | 15 | `/agent-enhance` | Quality matters, one-time investment |
| Enterprise library | 100+ | `/agent-format` → selective `/agent-enhance` | Batch format all, enhance top 20 |
| After template init | 5-20 | `/agent-format` (included), optional `/agent-enhance` | Progressive enhancement |
| CI/CD pipeline | Any | `/agent-format` | No AI dependencies |
| Air-gapped environment | Any | `/agent-format` | Offline-capable |

### Quality Comparison

**Generic Boundaries (6/10)**:
```markdown
### ALWAYS
- ✅ Run build verification before tests (block if compilation fails)
- ✅ Execute in technology-specific test runner (pytest/vitest/dotnet test)
```

**AI-Enhanced Boundaries (9/10)**:
```markdown
### ALWAYS
- ✅ Run pytest with coverage tracking via pytest-cov plugin (required for quality gates)
- ✅ Execute in isolated virtual environment matching production Python 3.11+ (prevent dependency conflicts)
- ✅ Verify test database fixtures are torn down after each test (prevent state leakage)
```

**Difference**: AI-enhanced boundaries are **domain-specific, technology-aware, and project-contextualized**.

### Progressive Enhancement Workflow

**Step 1: Template Initialization**
```bash
taskwright init react-typescript
# All agents: 6/10 (generic boundaries via /agent-format)
```

**Step 2: Work with Generic Boundaries**
```bash
# Generic boundaries are "good enough" for most work
/task-work TASK-001
# Agent guidance is helpful but not project-specific
```

**Step 3: Optional Enhancement**
```bash
# When you need domain-specific guidance
/agent-enhance .claude/agents/api-specialist.md
# Now 9/10 with YOUR project's patterns
```

**Result**: Pay for AI only when you need it, not during template creation.
```

#### 3. Update `installer/core/commands/agent-format.md`

Add section at the top:

```markdown
## Primary Use Case: Template Agent Libraries

**`/agent-format` is primarily designed for template creation**, not general use.

### Why Templates Use `/agent-format`

When creating templates with `/template-create`, agent boundaries are generated using `/agent-format` instead of `/agent-enhance` because:

1. **Speed**: Template creation completes in seconds, not minutes
2. **No AI Cost**: Template authors don't pay for AI generation
3. **No User Context**: Templates are starting points, not final implementations
4. **Maximum Reusability**: Generic boundaries work for ANY project using the stack
5. **Progressive Enhancement**: Users can upgrade to 9/10 with `/agent-enhance` later

### Template vs Project Boundaries

| Aspect | Template (6/10) | Project (9/10) |
|--------|-----------------|----------------|
| Generated by | `/agent-format` | `/agent-enhance` |
| When | Template creation | After project init (optional) |
| Content | Generic, role-based | Domain-specific, context-aware |
| Cost | $0 (deterministic) | Claude API tokens |
| Reusability | High (any project) | Low (project-specific) |

### For Template Users

If you initialized a project from a template:
```bash
# Your agents have generic boundaries (6/10) - this is intentional
# To upgrade to domain-specific boundaries (9/10):
/agent-enhance .claude/agents/api-specialist.md
```

### For Template Authors

When creating templates:
```bash
/template-create my-stack-template
# Automatically runs /agent-format on all agents
# Result: Fast creation, zero AI cost, 6/10 quality baseline
```
```

#### 4. Update `installer/core/commands/agent-enhance.md`

Add section:

```markdown
## Relationship with `/agent-format`

### When to Use Each

**Use `/agent-enhance`** when:
- You need **domain-specific** boundaries tailored to your codebase
- Quality matters more than speed (9/10 vs 6/10)
- You have Claude API access and budget
- Working with critical workflow agents

**Use `/agent-format`** when:
- Creating templates (primary use case)
- Need batch processing (100+ agents)
- Working in air-gapped environments
- Speed and cost are priorities

### Progressive Enhancement

Templates ship with generic boundaries (6/10) via `/agent-format`. You can upgrade:

```bash
# After initializing from template
taskwright init react-typescript

# Optional: Enhance specific agents
/agent-enhance .claude/agents/api-specialist.md
# Now boundaries are customized to YOUR project
```

See: [Agent Enhancement Decision Guide](../../guides/agent-enhancement-decision-guide.md)
```

#### 5. Update `installer/core/commands/template-create.md`

Add section:

```markdown
## Agent Enhancement During Template Creation

### Phase 5.5: Agent Enhancement (Automatic)

During template creation, `/template-create` automatically runs `/agent-format` on all generated agents:

**Why `/agent-format` (not `/agent-enhance`)?**

1. **Speed**: Completes in <1 minute for all agents
2. **No AI Cost**: Template creation is free (no Claude API calls)
3. **Reusability**: Generic boundaries work for ANY project
4. **Progressive Enhancement**: Users can upgrade to 9/10 later

**Result**: All template agents ship with:
- ✅ GitHub-compliant boundaries (6/10 quality)
- ✅ Proper placement (lines 80-150)
- ✅ ALWAYS/NEVER/ASK framework
- ✅ Role-specific content (testing/architecture/etc.)

### Quality Tier System

Templates use a **two-tier quality approach**:

| Tier | Quality | How | When |
|------|---------|-----|------|
| **Template** | 6/10 | `/agent-format` (auto) | Template creation |
| **Project** | 9/10 | `/agent-enhance` (manual) | After project init |

### For Template Users

When you initialize a project from a template:
```bash
taskwright init react-typescript
# All agents have generic boundaries (6/10)

# Optional: Upgrade to domain-specific (9/10)
/agent-enhance .claude/agents/api-specialist.md
```

This approach ensures:
- ✅ Templates are fast to create
- ✅ Users get immediate value (6/10 > 0/10)
- ✅ Users can enhance when needed
- ✅ No forced AI costs during template creation
```

---

## Acceptance Criteria

### AC-1: Documentation Completeness

- [ ] **AC-1.1**: `docs/guides/template-philosophy.md` updated with "Agent Enhancement Strategy" section
- [ ] **AC-1.2**: New `docs/guides/agent-enhancement-decision-guide.md` created with decision matrix
- [ ] **AC-1.3**: `installer/core/commands/agent-format.md` updated with primary use case explanation
- [ ] **AC-1.4**: `installer/core/commands/agent-enhance.md` updated with relationship section
- [ ] **AC-1.5**: `installer/core/commands/template-create.md` updated with Phase 5.5 explanation

### AC-2: User Scenario Coverage

- [ ] **AC-2.1**: Template author workflow explained (when to use `/agent-format`)
- [ ] **AC-2.2**: Template user workflow explained (progressive enhancement path)
- [ ] **AC-2.3**: Decision matrix covers all common scenarios
- [ ] **AC-2.4**: Quality comparison shows 6/10 vs 9/10 examples
- [ ] **AC-2.5**: Cost/benefit analysis included for each approach

### AC-3: Cross-References

- [ ] **AC-3.1**: All command docs link to decision guide
- [ ] **AC-3.2**: Template philosophy links to agent enhancement workflow
- [ ] **AC-3.3**: CLAUDE.md references updated documentation
- [ ] **AC-3.4**: README.md mentions two-tier quality system (if applicable)

### AC-4: Consistency

- [ ] **AC-4.1**: Terminology consistent across all docs (6/10 vs 9/10, generic vs domain-specific)
- [ ] **AC-4.2**: Code examples follow same format
- [ ] **AC-4.3**: Decision logic matches across all references
- [ ] **AC-4.4**: No contradictions between documents

---

## Implementation Notes

### Key Messages to Communicate

1. **`/agent-format` is for templates** (primary use case, not general use)
2. **Two-tier quality system** (template 6/10, project 9/10)
3. **Progressive enhancement** (start generic, upgrade when needed)
4. **Cost distribution** (template authors don't pay, users choose to upgrade)
5. **Speed vs quality tradeoff** (seconds vs minutes, $0 vs API cost)

### Tone and Style

- **Practical**: Focus on "when to use X" not "what X does"
- **Decision-oriented**: Help users choose the right tool
- **Examples-driven**: Show concrete workflows
- **Honest about tradeoffs**: Acknowledge speed vs quality, cost vs benefit

### Visual Aids (Optional)

Consider adding diagrams:
```
Template Creation Flow:
  /template-create
       ↓
  Generate agents
       ↓
  /agent-format (auto)
       ↓
  Template ships with 6/10 boundaries

User Enhancement Flow:
  taskwright init
       ↓
  Agents have 6/10 boundaries
       ↓
  /agent-enhance (optional)
       ↓
  Selected agents upgraded to 9/10
```

---

## Related Tasks

**Upstream**:
- [TASK-UX-6581](../../completed/TASK-UX-6581/) - Shared boundary utilities (provides the foundation)

**Downstream**:
- Batch enhance all 5 template libraries with `/agent-format` (separate task)
- Update video tutorials/screencasts (if they exist)
- Add FAQ section to docs (common questions about boundaries)

**Related Documentation Tasks**:
- TASK-063 - Update documentation for templates
- TASK-D01D - Update documentation
- TASK-DOC-9C4E - Update CLAUDE.md for Phase 8

---

## Files to Modify

1. `docs/guides/template-philosophy.md` - Add agent enhancement strategy
2. `docs/guides/agent-enhancement-decision-guide.md` - NEW file
3. `installer/core/commands/agent-format.md` - Add primary use case section
4. `installer/core/commands/agent-enhance.md` - Add relationship section
5. `installer/core/commands/template-create.md` - Add Phase 5.5 explanation
6. `CLAUDE.md` (optional) - Update if agent enhancement workflow referenced

---

## Success Criteria

**User Understanding**:
- ✅ Template authors know to use `/agent-format` for speed and reusability
- ✅ Template users understand why boundaries are generic (6/10)
- ✅ Users know how to upgrade to domain-specific boundaries (9/10)
- ✅ Decision matrix helps users choose the right tool

**Documentation Quality**:
- ✅ No contradictions between documents
- ✅ Clear examples for each workflow
- ✅ Cross-references work correctly
- ✅ Terminology is consistent

**Completeness**:
- ✅ All user scenarios covered
- ✅ All commands have relationship sections
- ✅ Decision guide covers all common cases
- ✅ Quality comparison is clear and honest

---

**Task created by**: Claude Code
**Creation date**: 2025-11-23
**Estimated completion**: 1-2 hours
**Complexity**: 3/10 (SIMPLE - documentation update, no code changes)
**Priority**: MEDIUM (improves user understanding of boundary enhancement workflow)
