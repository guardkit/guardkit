---
id: TASK-PDI-003
title: Enrich pattern files with codebase-specific examples
status: backlog
created: 2025-12-12T11:45:00Z
updated: 2025-12-12T11:45:00Z
priority: medium
tags: [progressive-disclosure, patterns, template-create, enhancement]
complexity: 5
parent_review: TASK-REV-PD01
implementation_mode: task-work
---

# Task: Enrich pattern files with codebase-specific examples

## Description

Pattern files in `.claude/rules/patterns/` currently contain minimal stub content generated by `/template-create`. Enhance these files with actual code examples extracted from the source codebase.

## Problem

Current pattern files have generic content:
```markdown
# Repository

## Overview
Mediates between domain and data mapping layers

## Example
No examples found in codebase.
```

Should include actual examples:
```markdown
# Repository

## Overview
Mediates between domain and data mapping layers using ErrorOr railway-oriented programming.

## Example

From `DriverRepository.cs`:
```csharp
public async Task<ErrorOr<DriverDetails>> GetDriverDetails()
{
    var result = await _realmAccessor.ExecuteReadAsync<DriverDetails>(
        realm => realm.All<RealmDriver>().FirstOrDefault()
            ?? AppErrors.Driver.GetFailed,
        AppErrors.Driver.DatabaseError);

    return result.IsError ? result.Errors : result.Value;
}
```

## Best Practices
- Always use IRealmAccessor for thread-safe operations
- Return ErrorOr<T> for consistent error handling
- Materialize queries with ToList() before mapping
```

## Acceptance Criteria

- [ ] All 12 pattern files have real code examples
- [ ] Examples are extracted from the source codebase
- [ ] Best practices section populated with template-specific guidance
- [ ] Pattern files remain concise (<1KB each)
- [ ] `/template-create` updated to extract examples during generation

## Pattern Files to Enrich

| Pattern | Source Files to Extract From |
|---------|------------------------------|
| repository | DriverRepository, ConfigurationRepository |
| service-layer | ConfigurationService, LoadingSummaryService |
| engine | PlanningEngine, LoadingEngine |
| mvvm | ViewModelBase, LoadViewModel |
| mapper | DriverTypesMapper, ValidationQueryTypesMapper |
| validator | Validation query patterns |
| factory | ViewFactory, ScannerFactory |
| builder | API client builders |
| handler | Error handlers |
| controller | Navigation controllers |
| view | ContentPage views |
| railway-oriented-programming | ErrorOr usage patterns |

## Implementation Approach

1. **Option A**: Update `/template-create` Phase 5 to extract pattern examples
   - Pros: Automatic for all future templates
   - Cons: More complex implementation

2. **Option B**: Manual enhancement via `/agent-enhance` pattern mode
   - Pros: Simpler, immediate improvement
   - Cons: Manual effort per template

**Recommended**: Option A for long-term value

## Notes

- Medium priority - improves developer experience
- Requires `/task-work` for proper planning and implementation
- Consider adding `--enrich-patterns` flag to template-create
