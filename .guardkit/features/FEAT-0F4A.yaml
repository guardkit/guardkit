# Graphiti Refinement Phase 2 Feature File
# Generated from tasks/backlog/graphiti-refinement-phase2/
# Parent Review: TASK-REV-0CD7

id: FEAT-0F4A
name: "Graphiti Refinement Phase 2"
description: "Build on Phase 1 MVP to implement feature spec integration, interactive knowledge capture, knowledge query commands, and job-specific context retrieval for complete context management"
created: "2026-02-01T00:00:00Z"
status: planned
complexity: 7
estimated_tasks: 41

tasks:
  # Wave 1 - Track A: Feature Spec Integration (GR-003) - 15h
  - id: TASK-GR3-001
    name: "Implement FeatureDetector class"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-001-implement-feature-detector.md"
    complexity: 4
    dependencies: []
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR3-002
    name: "Implement FeaturePlanContext dataclass"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-002-implement-feature-plan-context.md"
    complexity: 3
    dependencies: []
    status: pending
    implementation_mode: direct
    estimated_minutes: 120

  - id: TASK-GR3-003
    name: "Implement FeaturePlanContextBuilder"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-003-implement-context-builder.md"
    complexity: 5
    dependencies:
      - TASK-GR3-001
      - TASK-GR3-002
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR3-004
    name: "Integrate with /feature-plan command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-004-integrate-feature-plan.md"
    complexity: 4
    dependencies:
      - TASK-GR3-003
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR3-005
    name: "Add --context CLI option to feature-plan"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-005-add-context-cli-option.md"
    complexity: 2
    dependencies:
      - TASK-GR3-004
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR3-006
    name: "Add AutoBuild context queries"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-006-add-autobuild-context-queries.md"
    complexity: 4
    dependencies:
      - TASK-GR3-003
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR3-007
    name: "Add tests for context building"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-007-add-context-building-tests.md"
    complexity: 4
    dependencies:
      - TASK-GR3-003
      - TASK-GR3-006
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR3-008
    name: "Update GR-003 documentation"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR3-008-update-gr003-documentation.md"
    complexity: 2
    dependencies:
      - TASK-GR3-007
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  # Wave 1 - Track B: Interactive Knowledge Capture (GR-004) - 19h
  - id: TASK-GR4-001
    name: "Implement KnowledgeGapAnalyzer"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-001-implement-knowledge-gap-analyzer.md"
    complexity: 5
    dependencies: []
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR4-002
    name: "Implement InteractiveCaptureSession"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-002-implement-capture-session.md"
    complexity: 5
    dependencies:
      - TASK-GR4-001
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR4-003
    name: "Create CLI capture command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-003-create-capture-cli-command.md"
    complexity: 3
    dependencies:
      - TASK-GR4-002
    status: pending
    implementation_mode: direct
    estimated_minutes: 120

  - id: TASK-GR4-004
    name: "Add fact extraction logic"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-004-add-fact-extraction.md"
    complexity: 4
    dependencies:
      - TASK-GR4-002
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR4-005
    name: "Implement Graphiti persistence"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-005-implement-graphiti-persistence.md"
    complexity: 4
    dependencies:
      - TASK-GR4-004
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR4-006
    name: "Add /task-review --capture-knowledge integration"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-006-add-task-review-capture.md"
    complexity: 4
    dependencies:
      - TASK-GR4-005
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR4-007
    name: "Add AutoBuild workflow customization questions"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-007-add-autobuild-customization.md"
    complexity: 4
    dependencies:
      - TASK-GR4-005
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR4-008
    name: "Add GR-004 tests"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-008-add-gr004-tests.md"
    complexity: 4
    dependencies:
      - TASK-GR4-006
      - TASK-GR4-007
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR4-009
    name: "Update GR-004 documentation"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR4-009-update-gr004-documentation.md"
    complexity: 2
    dependencies:
      - TASK-GR4-008
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  # Wave 2: Knowledge Query Commands (GR-005) - 13h
  - id: TASK-GR5-001
    name: "Implement show command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-001-implement-show-command.md"
    complexity: 4
    dependencies:
      - TASK-GR3-008
      - TASK-GR4-009
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR5-002
    name: "Implement search command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-002-implement-search-command.md"
    complexity: 4
    dependencies:
      - TASK-GR3-008
      - TASK-GR4-009
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR5-003
    name: "Implement list command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-003-implement-list-command.md"
    complexity: 3
    dependencies:
      - TASK-GR5-001
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR5-004
    name: "Implement status command"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-004-implement-status-command.md"
    complexity: 3
    dependencies:
      - TASK-GR5-001
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR5-005
    name: "Add output formatting utilities"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-005-add-output-formatting.md"
    complexity: 3
    dependencies:
      - TASK-GR5-001
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR5-006
    name: "Create TurnStateEpisode schema"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-006-create-turn-state-schema.md"
    complexity: 4
    dependencies:
      - TASK-GR3-008
      - TASK-GR4-009
    status: pending
    implementation_mode: task-work
    estimated_minutes: 60

  - id: TASK-GR5-007
    name: "Add turn state capture to feature-build"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-007-add-turn-state-capture.md"
    complexity: 5
    dependencies:
      - TASK-GR5-006
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR5-008
    name: "Add turn context loading for next turn"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-008-add-turn-context-loading.md"
    complexity: 4
    dependencies:
      - TASK-GR5-007
    status: pending
    implementation_mode: task-work
    estimated_minutes: 60

  - id: TASK-GR5-009
    name: "Add GR-005 tests"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-009-add-gr005-tests.md"
    complexity: 4
    dependencies:
      - TASK-GR5-003
      - TASK-GR5-004
      - TASK-GR5-005
      - TASK-GR5-008
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR5-010
    name: "Update GR-005 documentation"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR5-010-update-gr005-documentation.md"
    complexity: 2
    dependencies:
      - TASK-GR5-009
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  # Wave 3: Job-Specific Context Retrieval (GR-006) - 32h
  - id: TASK-GR6-001
    name: "Implement TaskAnalyzer"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-001-implement-task-analyzer.md"
    complexity: 5
    dependencies:
      - TASK-GR5-010
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR6-002
    name: "Implement DynamicBudgetCalculator"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-002-implement-budget-calculator.md"
    complexity: 6
    dependencies:
      - TASK-GR6-001
    status: pending
    implementation_mode: task-work
    estimated_minutes: 240

  - id: TASK-GR6-003
    name: "Implement JobContextRetriever"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-003-implement-job-context-retriever.md"
    complexity: 6
    dependencies:
      - TASK-GR6-002
    status: pending
    implementation_mode: task-work
    estimated_minutes: 240

  - id: TASK-GR6-004
    name: "Implement RetrievedContext formatting"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-004-implement-retrieved-context.md"
    complexity: 5
    dependencies:
      - TASK-GR6-003
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR6-005
    name: "Integrate with /task-work"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-005-integrate-task-work.md"
    complexity: 4
    dependencies:
      - TASK-GR6-004
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR6-006
    name: "Integrate with /feature-build"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-006-integrate-feature-build.md"
    complexity: 5
    dependencies:
      - TASK-GR6-005
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR6-007
    name: "Add role_constraints retrieval and formatting"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-007-add-role-constraints-retrieval.md"
    complexity: 4
    dependencies:
      - TASK-GR6-003
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR6-008
    name: "Add quality_gate_configs retrieval and formatting"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-008-add-quality-gate-retrieval.md"
    complexity: 4
    dependencies:
      - TASK-GR6-003
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR6-009
    name: "Add turn_states retrieval for cross-turn learning"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-009-add-turn-states-retrieval.md"
    complexity: 5
    dependencies:
      - TASK-GR6-003
      - TASK-GR5-008
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR6-010
    name: "Add implementation_modes retrieval"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-010-add-implementation-modes-retrieval.md"
    complexity: 3
    dependencies:
      - TASK-GR6-003
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR6-011
    name: "Relevance tuning and testing"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-011-add-relevance-tuning.md"
    complexity: 5
    dependencies:
      - TASK-GR6-009
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR6-012
    name: "Performance optimization"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-012-performance-optimization.md"
    complexity: 4
    dependencies:
      - TASK-GR6-011
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR6-013
    name: "Add GR-006 tests"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-013-add-gr006-tests.md"
    complexity: 5
    dependencies:
      - TASK-GR6-012
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR6-014
    name: "Update GR-006 documentation"
    file_path: "tasks/backlog/graphiti-refinement-phase2/TASK-GR6-014-update-gr006-documentation.md"
    complexity: 2
    dependencies:
      - TASK-GR6-013
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

orchestration:
  parallel_groups:
    # Wave 1: Track A (GR-003) and Track B (GR-004) run in parallel
    - - TASK-GR3-001
      - TASK-GR3-002
      - TASK-GR4-001
    # Wave 1 continued: dependent tasks in each track
    - - TASK-GR3-003
      - TASK-GR4-002
    - - TASK-GR3-004
      - TASK-GR3-006
      - TASK-GR4-003
      - TASK-GR4-004
    - - TASK-GR3-005
      - TASK-GR3-007
      - TASK-GR4-005
    - - TASK-GR3-008
      - TASK-GR4-006
      - TASK-GR4-007
    - - TASK-GR4-008
    - - TASK-GR4-009
    # Wave 2: Knowledge Query Commands (GR-005)
    - - TASK-GR5-001
      - TASK-GR5-002
      - TASK-GR5-006
    - - TASK-GR5-003
      - TASK-GR5-004
      - TASK-GR5-005
      - TASK-GR5-007
    - - TASK-GR5-008
    - - TASK-GR5-009
    - - TASK-GR5-010
    # Wave 3: Job-Specific Context Retrieval (GR-006)
    - - TASK-GR6-001
    - - TASK-GR6-002
    - - TASK-GR6-003
    - - TASK-GR6-004
      - TASK-GR6-007
      - TASK-GR6-008
      - TASK-GR6-009
      - TASK-GR6-010
    - - TASK-GR6-005
    - - TASK-GR6-006
      - TASK-GR6-011
    - - TASK-GR6-012
    - - TASK-GR6-013
    - - TASK-GR6-014
  estimated_duration_minutes: 4740  # 79 hours
  recommended_parallel: 2
