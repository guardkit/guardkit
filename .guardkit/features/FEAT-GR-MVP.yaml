# Graphiti Refinement MVP Feature File
# Generated by /feature-plan command
# Parent Review: TASK-REV-1505

id: FEAT-GR-MVP
name: "Graphiti Refinement MVP"
description: "Enhance Graphiti integration to support project-specific knowledge seeding, job-specific context retrieval, and cross-session learning from AutoBuild lessons"
created: "2026-01-30T00:00:00Z"
status: planned
complexity: 7
estimated_tasks: 30

tasks:
  # Phase 0: Seeding Update (6h)
  - id: TASK-GR-PRE-000-A
    name: "Add metadata block to existing seeding episodes"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-000-A-add-metadata-to-seeding.md"
    complexity: 4
    dependencies: []
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-PRE-000-B
    name: "Add guardkit graphiti clear command"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-000-B-add-clear-command.md"
    complexity: 3
    dependencies: []
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-000-C
    name: "Add tests and documentation for seeding update"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-000-C-seeding-tests-docs.md"
    complexity: 2
    dependencies:
      - TASK-GR-PRE-000-A
      - TASK-GR-PRE-000-B
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  # Phase 1: Foundation (27h)
  - id: TASK-GR-PRE-001-A
    name: "Add project_id to GraphitiClient"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-001-A-add-project-id.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-000-C
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-001-B
    name: "Implement group ID prefixing"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-001-B-group-id-prefixing.md"
    complexity: 4
    dependencies:
      - TASK-GR-PRE-000-C
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-PRE-001-C
    name: "Add project initialization logic"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-001-C-project-init-logic.md"
    complexity: 4
    dependencies:
      - TASK-GR-PRE-001-A
      - TASK-GR-PRE-001-B
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-PRE-001-D
    name: "Tests and documentation for project namespace"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-001-D-namespace-tests-docs.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-001-A
      - TASK-GR-PRE-001-B
    status: pending
    implementation_mode: direct
    estimated_minutes: 120

  - id: TASK-GR-PRE-002-A
    name: "Define standard metadata fields"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-002-A-define-metadata-fields.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-000-C
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-002-B
    name: "Create EpisodeMetadata dataclass"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-002-B-episode-metadata-dataclass.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-000-C
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-002-C
    name: "Update add_episode to include metadata"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-002-C-update-add-episode.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-002-A
      - TASK-GR-PRE-002-B
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-002-D
    name: "Tests and documentation for episode metadata"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-002-D-metadata-tests-docs.md"
    complexity: 2
    dependencies:
      - TASK-GR-PRE-002-A
      - TASK-GR-PRE-002-B
    status: pending
    implementation_mode: direct
    estimated_minutes: 60

  - id: TASK-GR-PRE-003-A
    name: "Research graphiti-core upsert capabilities"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-003-A-research-upsert.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-000-C
    status: pending
    implementation_mode: manual
    estimated_minutes: 120

  - id: TASK-GR-PRE-003-B
    name: "Implement episode_exists method"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-003-B-episode-exists.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-003-A
      - TASK-GR-PRE-002-A
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-PRE-003-C
    name: "Implement upsert_episode logic"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-003-C-upsert-episode.md"
    complexity: 5
    dependencies:
      - TASK-GR-PRE-003-B
    status: pending
    implementation_mode: task-work
    estimated_minutes: 240

  - id: TASK-GR-PRE-003-D
    name: "Tests and documentation for upsert"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-PRE-003-D-upsert-tests-docs.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-003-C
    status: pending
    implementation_mode: direct
    estimated_minutes: 120

  # Phase 2: Core Functionality (39h)
  - id: TASK-GR-001-A
    name: "Add project-specific group IDs to config"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-A-project-group-ids.md"
    complexity: 2
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 60

  - id: TASK-GR-001-B
    name: "Create ProjectOverviewEpisode schema"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-B-project-overview-schema.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-001-C
    name: "Create ProjectArchitectureEpisode schema"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-C-architecture-schema.md"
    complexity: 2
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 60

  - id: TASK-GR-001-D
    name: "Create RoleConstraintsEpisode and seed defaults"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-D-role-constraints-schema.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-001-E
    name: "Create QualityGateConfigEpisode and seed defaults"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-E-quality-gate-config-schema.md"
    complexity: 3
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-001-F
    name: "Create ImplementationModeEpisode and seed defaults"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-F-implementation-mode-schema.md"
    complexity: 2
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 60

  - id: TASK-GR-001-G
    name: "Implement CLAUDE.md/README.md parsing"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-G-claude-md-parsing.md"
    complexity: 4
    dependencies:
      - TASK-GR-001-B
      - TASK-GR-001-C
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-001-H
    name: "Add project seeding to guardkit init"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-H-project-seeding-init.md"
    complexity: 4
    dependencies:
      - TASK-GR-001-D
      - TASK-GR-001-E
      - TASK-GR-001-F
      - TASK-GR-001-G
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-001-I
    name: "Implement optional interactive setup"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-001-I-interactive-setup.md"
    complexity: 3
    dependencies:
      - TASK-GR-001-H
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-A
    name: "Create parser registry infrastructure"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-A-parser-registry.md"
    complexity: 4
    dependencies:
      - TASK-GR-PRE-003-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-B
    name: "Implement FeatureSpecParser"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-B-feature-spec-parser.md"
    complexity: 4
    dependencies:
      - TASK-GR-002-A
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-002-C
    name: "Implement ADRParser"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-C-adr-parser.md"
    complexity: 3
    dependencies:
      - TASK-GR-002-A
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-D
    name: "Implement ProjectOverviewParser"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-D-project-overview-parser.md"
    complexity: 3
    dependencies:
      - TASK-GR-002-A
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-E
    name: "Add guardkit graphiti add-context CLI command"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-E-add-context-command.md"
    complexity: 4
    dependencies:
      - TASK-GR-002-B
      - TASK-GR-002-C
      - TASK-GR-002-D
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-002-F
    name: "Add --type, --force, --dry-run flags"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-F-cli-flags.md"
    complexity: 3
    dependencies:
      - TASK-GR-002-E
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-G
    name: "Tests for parsers"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-G-parser-tests.md"
    complexity: 4
    dependencies:
      - TASK-GR-002-F
    status: pending
    implementation_mode: task-work
    estimated_minutes: 180

  - id: TASK-GR-002-H
    name: "Tests for CLI command"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-H-cli-tests.md"
    complexity: 3
    dependencies:
      - TASK-GR-002-F
    status: pending
    implementation_mode: task-work
    estimated_minutes: 120

  - id: TASK-GR-002-I
    name: "Documentation for context addition"
    file_path: "tasks/backlog/graphiti-refinement-mvp/TASK-GR-002-I-documentation.md"
    complexity: 3
    dependencies:
      - TASK-GR-002-F
    status: pending
    implementation_mode: direct
    estimated_minutes: 120

orchestration:
  parallel_groups:
    # Wave 1: Phase 0 foundation
    - - TASK-GR-PRE-000-A
      - TASK-GR-PRE-000-B
    # Wave 2: Phase 0 tests
    - - TASK-GR-PRE-000-C
    # Wave 3: Phase 1 parallel tracks
    - - TASK-GR-PRE-001-A
      - TASK-GR-PRE-001-B
      - TASK-GR-PRE-002-A
      - TASK-GR-PRE-002-B
      - TASK-GR-PRE-003-A
    # Wave 4: Phase 1 integration
    - - TASK-GR-PRE-001-C
      - TASK-GR-PRE-001-D
      - TASK-GR-PRE-002-C
      - TASK-GR-PRE-002-D
      - TASK-GR-PRE-003-B
    # Wave 5: Upsert implementation
    - - TASK-GR-PRE-003-C
    # Wave 6: Upsert tests (depends on wave 5)
    - - TASK-GR-PRE-003-D
    # Wave 7: Phase 2 schemas + parser registry
    - - TASK-GR-001-A
      - TASK-GR-001-B
      - TASK-GR-001-C
      - TASK-GR-001-D
      - TASK-GR-001-E
      - TASK-GR-001-F
      - TASK-GR-002-A
    # Wave 8: Phase 2 parsers
    - - TASK-GR-001-G
      - TASK-GR-002-B
      - TASK-GR-002-C
      - TASK-GR-002-D
    # Wave 9: Phase 2 seeding (H depends on G)
    - - TASK-GR-001-H
      - TASK-GR-002-E
    # Wave 10: Phase 2 CLI flags (F depends on E, I depends on H)
    - - TASK-GR-001-I
      - TASK-GR-002-F
    # Wave 9: Phase 2 final
    - - TASK-GR-002-G
      - TASK-GR-002-H
      - TASK-GR-002-I
  estimated_duration_minutes: 4320  # 72 hours
  recommended_parallel: 3
