# ADR-FS-001: Gherkin as Specification Format for AutoBuild

- **Date**: 2026-02
- **Status**: Accepted

## Context

AutoBuild's Player-Coach loop needs unambiguous, machine-verifiable acceptance criteria. Prose specifications are subjective — the Coach cannot reliably determine whether a Player's implementation satisfies a vague requirement. The format must be technology-stack agnostic since GuardKit targets projects in Python, TypeScript, Go, Rust, and C#.

## Decision

Use Gherkin (Given/When/Then) as the primary specification format generated by `/feature-spec`. Scenarios use domain language, not implementation language (e.g., "the upload should succeed" not "return 201").

## Rationale

Gherkin is language-neutral with BDD runners for every major stack (pytest-bdd, cucumber-js, godog, cucumber-rs). It collapses spec, tests, and acceptance criteria into one artefact. Scenarios are independently executable. The Coach validates by running the appropriate BDD runner for the detected stack.

## Alternatives Rejected

- **EARS notation** — No tooling ecosystem, never used in practice beyond RequireKit
- **OpenAPI** — Covers APIs only, not business logic
- **Prose acceptance criteria** — Ambiguous, not machine-executable

## Consequences

**Positive:**
- All features specified via `/feature-spec` produce `.feature` files
- Coach has concrete, executable criteria to validate against
- Single artefact serves as spec, test cases, and documentation
- Stack-agnostic — same `.feature` file works for any implementation language

**Negative:**
- Gherkin can become verbose for complex state machines
- Requires BDD runner in target project's test dependencies
- AI-generated Gherkin quality depends on prompt methodology (addressed by propose-review cycle)

## Related

- Strengthens [ADR-SP-003](ADR-SP-003-adversarial-cooperation.md) — gives Coach concrete criteria
- Follows [ADR-SP-007](ADR-SP-007-markdown-authoritative.md) — `.feature` files are authoritative, Graphiti stores queryable references
