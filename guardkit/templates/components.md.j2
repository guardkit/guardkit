# {% if is_ddd %}Bounded Context Map{% else %}Component Map{% endif %}

> Generated by `/system-plan` on {{ date }}

{% if is_ddd %}
This document describes the bounded contexts in the system following Domain-Driven Design principles.
{% else %}
This document describes the components/modules in the system.
{% endif %}

{% if components %}
## Component Diagram

```mermaid
graph LR
    {% for comp in components %}
    COMP{{ loop.index }}["{{ comp.name }}"]
    {% endfor %}

    {% for comp in components %}
    {% for dep in comp.dependencies %}
    {% set dep_index = loop.index %}
    {% for other_comp in components %}
    {% if other_comp.name == dep %}
    COMP{{ loop.index0 + 1 }} --> COMP{{ loop.index }}["{{ dep }}"]
    {% endif %}
    {% endfor %}
    {% endfor %}
    {% endfor %}
```

{% for comp in components %}
## {{ comp.name }}

**Description:** {{ comp.description }}

### Responsibilities

{% for resp in comp.responsibilities %}
- {{ resp }}
{% endfor %}

### Dependencies

{% if comp.dependencies %}
{% for dep in comp.dependencies %}
- {{ dep }}
{% endfor %}
{% else %}
No dependencies.
{% endif %}

{% if is_ddd and comp.aggregate_roots %}
### Aggregate Roots

{% for root in comp.aggregate_roots %}
- **{{ root }}**
{% endfor %}
{% endif %}

{% if is_ddd and comp.domain_events %}
### Domain Events

{% for event in comp.domain_events %}
- `{{ event }}`
{% endfor %}
{% endif %}

{% if is_ddd and comp.context_mapping %}
### Context Mapping

{{ comp.context_mapping }}
{% endif %}

---

{% endfor %}
{% else %}
No components defined.
{% endif %}
